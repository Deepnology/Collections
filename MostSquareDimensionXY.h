#ifndef MOST_SQUARE_DIMENSION_XY_H
#define MOST_SQUARE_DIMENSION_XY_H
#include "Debug.h"
/*
Amazon
Distilled problem statement: given n, find x and y so that n <= x*y <=
n+2 and abs(x-y)->min. n,y,x are positive integers. There is always the
(n,1) solution.

The problem is to determine the dimensions (x,y) of a grid that is as
square as possible and large enough to contain n elements with no more
than 2 empty spaces. Orientation of the grid does not matter (tall vs
wide)

Examples: n=4 x = 2, y=2 0 empty spaces

n=17 x=6, y=3 1 empty spaces square, better than other options with fewer
empty spaces (x=6, y=4)

13 <= 3*5 <= 15
57 <= 3*19=57 <= 59
*/
class MostSquareDimensionXY
{
public:
	MostSquareDimensionXY() {}

	void Test()
	{
		std::cout << "MostSquareDimensionXY for n in [1:100]: " << std::endl;
		for (int n = 1; n <= 100; ++n)
		{
			auto res = Greedy(n);
			std::cout << n << " <= " << res.first << "*" << res.second << "=" << res.first*res.second << " <= " << n + 2 << std::endl;
		}
		std::cout << "MostSquareDimensionXY for n in [INT_MAX-100:INT_MAX-2]: " << std::endl;
		for (int n = INT_MAX - 100; n <= INT_MAX - 2; ++n)
		{
			auto res = Greedy(n);
			std::cout << n << " <= " << res.first << "*" << res.second << "=" << res.first*res.second << " <= " << n + 2 << std::endl;
		}
		
	}

	std::pair<int, int> Greedy(int n)
	{
		if (n <= 0) return{ -1,-1 };
		int x = (int)std::sqrt(n);
		if (x*x == n)
			return{ x,x };
		//now x is floor of sqrt(n)
		int y = x + 1;
		while (true)//note: the boundary testing condition (x >= 1 && y <= n) can also be skipped because the worst case of {x,y} will be {1,n}
		{
			long long product = (long long)x*(long long)y;
			if (product > (long long)(n + 2))
				--x;
			else if (product < (long long)n)
				++y;
			else
				break;
		}
		return{ x,y };
	}
};
/*
MostSquareDimensionXY for n in [1:100]:
1 <= 1*1=1 <= 3
2 <= 1*2=2 <= 4
3 <= 1*3=3 <= 5
4 <= 2*2=4 <= 6
5 <= 2*3=6 <= 7
6 <= 2*3=6 <= 8
7 <= 2*4=8 <= 9
8 <= 2*4=8 <= 10
9 <= 3*3=9 <= 11
10 <= 3*4=12 <= 12
11 <= 3*4=12 <= 13
12 <= 3*4=12 <= 14
13 <= 3*5=15 <= 15
14 <= 3*5=15 <= 16
15 <= 3*5=15 <= 17
16 <= 4*4=16 <= 18
17 <= 3*6=18 <= 19
18 <= 4*5=20 <= 20
19 <= 4*5=20 <= 21
20 <= 4*5=20 <= 22
21 <= 3*7=21 <= 23
22 <= 4*6=24 <= 24
23 <= 4*6=24 <= 25
24 <= 4*6=24 <= 26
25 <= 5*5=25 <= 27
26 <= 4*7=28 <= 28
27 <= 4*7=28 <= 29
28 <= 5*6=30 <= 30
29 <= 5*6=30 <= 31
30 <= 5*6=30 <= 32
31 <= 4*8=32 <= 33
32 <= 4*8=32 <= 34
33 <= 5*7=35 <= 35
34 <= 5*7=35 <= 36
35 <= 5*7=35 <= 37
36 <= 6*6=36 <= 38
37 <= 3*13=39 <= 39
38 <= 5*8=40 <= 40
39 <= 5*8=40 <= 41
40 <= 6*7=42 <= 42
41 <= 6*7=42 <= 43
42 <= 6*7=42 <= 44
43 <= 5*9=45 <= 45
44 <= 5*9=45 <= 46
45 <= 5*9=45 <= 47
46 <= 6*8=48 <= 48
47 <= 6*8=48 <= 49
48 <= 6*8=48 <= 50
49 <= 7*7=49 <= 51
50 <= 5*10=50 <= 52
51 <= 4*13=52 <= 53
52 <= 6*9=54 <= 54
53 <= 6*9=54 <= 55
54 <= 7*8=56 <= 56
55 <= 7*8=56 <= 57
56 <= 7*8=56 <= 58
57 <= 3*19=57 <= 59
58 <= 6*10=60 <= 60
59 <= 6*10=60 <= 61
60 <= 6*10=60 <= 62
61 <= 7*9=63 <= 63
62 <= 7*9=63 <= 64
63 <= 7*9=63 <= 65
64 <= 8*8=64 <= 66
65 <= 6*11=66 <= 67
66 <= 6*11=66 <= 68
67 <= 4*17=68 <= 69
68 <= 7*10=70 <= 70
69 <= 7*10=70 <= 71
70 <= 8*9=72 <= 72
71 <= 8*9=72 <= 73
72 <= 8*9=72 <= 74
73 <= 5*15=75 <= 75
74 <= 5*15=75 <= 76
75 <= 7*11=77 <= 77
76 <= 7*11=77 <= 78
77 <= 7*11=77 <= 79
78 <= 8*10=80 <= 80
79 <= 8*10=80 <= 81
80 <= 8*10=80 <= 82
81 <= 9*9=81 <= 83
82 <= 7*12=84 <= 84
83 <= 7*12=84 <= 85
84 <= 7*12=84 <= 86
85 <= 5*17=85 <= 87
86 <= 8*11=88 <= 88
87 <= 8*11=88 <= 89
88 <= 9*10=90 <= 90
89 <= 9*10=90 <= 91
90 <= 9*10=90 <= 92
91 <= 7*13=91 <= 93
92 <= 4*23=92 <= 94
93 <= 5*19=95 <= 95
94 <= 8*12=96 <= 96
95 <= 8*12=96 <= 97
96 <= 8*12=96 <= 98
97 <= 9*11=99 <= 99
98 <= 9*11=99 <= 100
99 <= 9*11=99 <= 101
100 <= 10*10=100 <= 102
MostSquareDimensionXY for n in [INT_MAX-100:INT_MAX-2]:
2147483547 <= 99*21691753=2147483547 <= 2147483549
2147483548 <= 41630*51585=2147483550 <= 2147483550
2147483549 <= 41630*51585=2147483550 <= 2147483551
2147483550 <= 41630*51585=2147483550 <= 2147483552
2147483551 <= 45907*46779=2147483553 <= 2147483553
2147483552 <= 45907*46779=2147483553 <= 2147483554
2147483553 <= 45907*46779=2147483553 <= 2147483555
2147483554 <= 44353*48418=2147483554 <= 2147483556
2147483555 <= 11772*182423=2147483556 <= 2147483557
2147483556 <= 33638*63841=2147483558 <= 2147483558
2147483557 <= 33638*63841=2147483558 <= 2147483559
2147483558 <= 33638*63841=2147483558 <= 2147483560
2147483559 <= 9080*236507=2147483560 <= 2147483561
2147483560 <= 26502*81031=2147483562 <= 2147483562
2147483561 <= 26502*81031=2147483562 <= 2147483563
2147483562 <= 26502*81031=2147483562 <= 2147483564
2147483563 <= 25076*85639=2147483564 <= 2147483565
2147483564 <= 25076*85639=2147483564 <= 2147483566
2147483565 <= 11503*186689=2147483567 <= 2147483567
2147483566 <= 40836*52588=2147483568 <= 2147483568
2147483567 <= 40836*52588=2147483568 <= 2147483569
2147483568 <= 40836*52588=2147483568 <= 2147483570
2147483569 <= 1463*1467863=2147483569 <= 2147483571
2147483570 <= 29284*73333=2147483572 <= 2147483572
2147483571 <= 29284*73333=2147483572 <= 2147483573
2147483572 <= 29284*73333=2147483572 <= 2147483574
2147483573 <= 954*2251031=2147483574 <= 2147483575
2147483574 <= 32774*65524=2147483576 <= 2147483576
2147483575 <= 32774*65524=2147483576 <= 2147483577
2147483576 <= 32774*65524=2147483576 <= 2147483578
2147483577 <= 30309*70853=2147483577 <= 2147483579
2147483578 <= 42702*50290=2147483580 <= 2147483580
2147483579 <= 42702*50290=2147483580 <= 2147483581
2147483580 <= 42702*50290=2147483580 <= 2147483582
2147483581 <= 34919*61499=2147483581 <= 2147483583
2147483582 <= 38464*55831=2147483584 <= 2147483584
2147483583 <= 38464*55831=2147483584 <= 2147483585
2147483584 <= 38464*55831=2147483584 <= 2147483586
2147483585 <= 11635*184571=2147483585 <= 2147483587
2147483586 <= 24548*87481=2147483588 <= 2147483588
2147483587 <= 24548*87481=2147483588 <= 2147483589
2147483588 <= 34981*61390=2147483590 <= 2147483590
2147483589 <= 34981*61390=2147483590 <= 2147483591
2147483590 <= 43317*49576=2147483592 <= 2147483592
2147483591 <= 43317*49576=2147483592 <= 2147483593
2147483592 <= 43317*49576=2147483592 <= 2147483594
2147483593 <= 14101*152293=2147483593 <= 2147483595
2147483594 <= 10898*197053=2147483594 <= 2147483596
2147483595 <= 301*7134497=2147483597 <= 2147483597
2147483596 <= 32773*65526=2147483598 <= 2147483598
2147483597 <= 32773*65526=2147483598 <= 2147483599
2147483598 <= 34600*62066=2147483600 <= 2147483600
2147483599 <= 34600*62066=2147483600 <= 2147483601
2147483600 <= 34600*62066=2147483600 <= 2147483602
2147483601 <= 1187*1809169=2147483603 <= 2147483603
2147483602 <= 38612*55617=2147483604 <= 2147483604
2147483603 <= 38612*55617=2147483604 <= 2147483605
2147483604 <= 38612*55617=2147483604 <= 2147483606
2147483605 <= 32547*65981=2147483607 <= 2147483607
2147483606 <= 32547*65981=2147483607 <= 2147483608
2147483607 <= 32547*65981=2147483607 <= 2147483609
2147483608 <= 42255*50822=2147483610 <= 2147483610
2147483609 <= 42255*50822=2147483610 <= 2147483611
2147483610 <= 42255*50822=2147483610 <= 2147483612
2147483611 <= 32483*66111=2147483613 <= 2147483613
2147483612 <= 32483*66111=2147483613 <= 2147483614
2147483613 <= 32483*66111=2147483613 <= 2147483615
2147483614 <= 43696*49146=2147483616 <= 2147483616
2147483615 <= 43696*49146=2147483616 <= 2147483617
2147483616 <= 43696*49146=2147483616 <= 2147483618
2147483617 <= 29389*73071=2147483619 <= 2147483619
2147483618 <= 46030*46654=2147483620 <= 2147483620
2147483619 <= 46030*46654=2147483620 <= 2147483621
2147483620 <= 46030*46654=2147483620 <= 2147483622
2147483621 <= 45083*47634=2147483622 <= 2147483623
2147483622 <= 45083*47634=2147483622 <= 2147483624
2147483623 <= 34825*61665=2147483625 <= 2147483625
2147483624 <= 34825*61665=2147483625 <= 2147483626
2147483625 <= 34825*61665=2147483625 <= 2147483627
2147483626 <= 2491*862097=2147483627 <= 2147483628
2147483627 <= 2491*862097=2147483627 <= 2147483629
2147483628 <= 32771*65530=2147483630 <= 2147483630
2147483629 <= 36031*59601=2147483631 <= 2147483631
2147483630 <= 36031*59601=2147483631 <= 2147483632
2147483631 <= 36031*59601=2147483631 <= 2147483633
2147483632 <= 36291*59174=2147483634 <= 2147483634
2147483633 <= 36291*59174=2147483634 <= 2147483635
2147483634 <= 36291*59174=2147483634 <= 2147483636
2147483635 <= 18535*115861=2147483635 <= 2147483637
2147483636 <= 5938*361651=2147483638 <= 2147483638
2147483637 <= 5938*361651=2147483638 <= 2147483639
2147483638 <= 44196*48590=2147483640 <= 2147483640
2147483639 <= 44196*48590=2147483640 <= 2147483641
2147483640 <= 44196*48590=2147483640 <= 2147483642
2147483641 <= 2699*795659=2147483641 <= 2147483643
2147483642 <= 8356*256999=2147483644 <= 2147483644
2147483643 <= 8356*256999=2147483644 <= 2147483645
2147483644 <= 42966*49981=2147483646 <= 2147483646
2147483645 <= 42966*49981=2147483646 <= 2147483647
*/
#endif
